(this["webpackJsonpgotodo-frontend"]=this["webpackJsonpgotodo-frontend"]||[]).push([[0],{27:function(e,t,a){e.exports=a(39)},32:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),i=(a(32),a(33),a(7)),l=a(2);function s(e){return r.a.createElement("header",{className:"sans-serif bg-moon-gray"},r.a.createElement("div",{className:"cf"},e.authenticated?r.a.createElement("a",{className:"fl f4 w-20-ns w-100 tc v-mid link db pa3 black hover-white bg-animate hover-bg-mid-gray",href:"#",onClick:function(){return e.logout()}},"Logout"):null),r.a.createElement("div",{className:"w-100 f1 v-mid tc pa5"},"Togo Todo List"))}var u=a(6);function d(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{className:"mw8 center"},r.a.createElement("div",{className:"cf"},r.a.createElement("div",{className:"fl w-75-ns w-100 pa2"},r.a.createElement("div",{className:"fl w-25-ns w-100 pa2"},r.a.createElement("label",{htmlFor:"description",className:"v-mid tr db pa1"},"Content")),r.a.createElement("div",{className:"fl w-75-ns w-100 pa2"},r.a.createElement("textarea",{rows:"6",name:"description",className:"w-100 pa1",placeholder:"What will you do? ...",maxLength:"200",style:{resize:"none"},onChange:function(e){return o(e.target.value)},value:c}))),r.a.createElement("div",{className:"fl w-25-ns w-100 pa2"},r.a.createElement("div",{className:"pv2"},r.a.createElement("div",null,r.a.createElement("a",{href:"#",onClick:function(){o("")},className:"link v-mid tc bg-gray white db w-100 pa1"},"Reset"))),r.a.createElement("div",{className:"pv2"},r.a.createElement("div",{className:"mb1"},r.a.createElement("a",{href:"#",onClick:function(){e.addTask(c),o("")},className:"link v-mid tc bg-gray white db w-100 pa4"},"Add"))))))}var m=a(3);function f(e){return r.a.createElement("div",{className:"mw8 center pa2 cf"},r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("div",{className:"outline bg-white pa2 truncate"},e.data.content,"\xa0")),r.a.createElement("div",{className:"fl w-30-ns w-100 pa2 cf"},r.a.createElement("div",{className:"fl w-50 ph2"},r.a.createElement("a",{href:"#",className:"link v-mid tc db bg-white ba pa2 truncate ".concat(e.data.done?"green b--green":"gold b--gold"),onClick:function(t){e.doneToggle(Object(m.a)({},e.data,{done:!e.data.done})),t.preventDefault()}},e.data.done?"Done":"Working")),r.a.createElement("div",{className:"fl w-50 ph2"},r.a.createElement("a",{href:"#",className:"link v-mid tc db bg-white ba pa2 red b--red truncate",onClick:function(t){e.deleteCallback(e.data.id),t.preventDefault()}},"Delete"))))}function b(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cf"},r.a.createElement("div",{className:"fl w-30-ns w-100"},"\xa0"),r.a.createElement("div",{className:"fl w-20-ns w-100 pa2"},r.a.createElement("input",{type:"date",className:"w-100 pt1 pb2",onChange:function(t){o(t.target.value),e.loadTasks(t.target.value)},value:c})),r.a.createElement("div",{className:"fl w-10-ns w-50 pa2"},r.a.createElement("a",{className:"link db tc pa2 bg-white ba bw-1 f5 bg-animate hover-bg-gray hover-white",href:"#",onClick:function(){var t=function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getFullYear());return"".concat(n,"-").concat(a,"-").concat(t)}();o(t),e.loadTasks(t)}},"Today")),r.a.createElement("div",{className:"fl w-10-ns w-50 pa2"},r.a.createElement("a",{className:"link db tc pa2 bg-white ba bw-1 f5 bg-animate hover-bg-gray hover-white",href:"#",onClick:function(){o(""),e.loadTasks()}},"All"))),e.tasks.map((function(t,a){return r.a.createElement(f,{key:t.id,data:t,doneToggle:e.updateTask,deleteCallback:e.deleteTask})})))}var p=a(8),h="SET_TASKS",g="ADD_TASK",v="UPDATE_TASK",w="DELETE_TASK",E="AUTHENTICATE",k="SET_USER_INFO",N=a(1),y=a.n(N),O=function(e){return{type:E,authenticated:e}},j=function(e){return{type:k,id:e}},T=function(e){return function(t,a){return y.a.showLoading(),L.Logout().finally((function(){y.a.close(),console.log(e),e.push("/login")}))}},S=401,x="/api/tasks";function C(e){return e.status===S?e.json().then((function(e){return{authorized:!1,body:e}})):e.json().then((function(e){return{authorized:!0,body:e}}))}var L={Login:function(e,t){return fetch("/api/login",{method:"POST",body:JSON.stringify({id:e,password:t})}).then(C)},Signup:function(e,t,a){return fetch("/api/signup",{method:"POST",body:JSON.stringify({id:e,password:t,max_todo:a})}).then(C)},Logout:function(){return fetch("/api/logout",{method:"POST"})},tasks:{Create:function(e){return fetch(x,{method:"POST",body:JSON.stringify({content:e,done:!1})}).then(C)},ReadAll:function(e){var t=x;return e&&(t=x+"?"+new URLSearchParams({created_date:e})),fetch(t,{}).then(C)},Update:function(e){return fetch(x,{method:"PUT",body:JSON.stringify(Object(m.a)({},e))}).then(C)},Delete:function(e){return fetch(x,{method:"DELETE",body:JSON.stringify({id:e})}).then(C)}}},D=function(e,t){return function(a,n){return y.a.showLoading(),L.tasks.ReadAll(e).then((function(e){return y.a.close(),e.authorized?e.body.error?y.a.fire({title:"Error loading tasks",text:e.body.error,icon:"error"}):void a((n=e.body.data,r=null,{type:h,data:n,error:r})):(a(T(t)),y.a.fire({title:"You need to log in first",text:e.body.error,icon:"error"}));var n,r})).catch((function(e){return y.a.fire({title:"Unknown error",text:e,type:"error"})}))}},A=function(e,t,a){return function(n,r){return y.a.showLoading(),L.tasks.Create(e,t).then((function(e){return y.a.close(),e.authorized?e.body.error?y.a.fire({title:"Error adding new task",text:e.body.error,icon:"error"}):void n((t=e.body.data,{type:g,data:t})):(n(T(a)),y.a.fire({title:"You need to log in first",text:e.body.error,icon:"error"}));var t})).catch((function(e){return y.a.fire({title:"Unknown error",text:e,type:"error"})}))}},F=function(e,t){return function(a,n){return y.a.showLoading(),L.tasks.Update(e).then((function(e){return y.a.close(),e.authorized?e.body.error?y.a.fire({title:"Error updating task",text:e.body.error,icon:"error"}):void a(function(e){return{type:v,data:e}}(e.body.data)):(a(T(t)),y.a.fire({title:"You need to log in first",text:e.body.error,icon:"error"}))})).catch((function(e){return y.a.fire({title:"Unknown error",text:e,type:"error"})}))}},U=function(e,t){return function(a,n){return y.a.showLoading(),L.tasks.Delete(e).then((function(e){return y.a.close(),e.authorized?e.body.error?y.a.fire({title:"Error removing tasks",text:e.body.error,icon:"error"}):void a(function(e){return{type:w,data:e}}(e.body.data)):(a(T(t)),y.a.fire({title:"You need to log in first",text:e.body.error,icon:"error"}))})).catch((function(e){return y.a.fire({title:"Unknown error",text:e,type:"error"})}))}};var z=Object(p.b)((function(e){return{tasks:e.index.tasks,user:e.auth.user}}),(function(e){return{loadTasks:function(t,a){return e(D(t,a))},addTask:function(t,a,n){return e(A(t,a,n))},updateTask:function(t,a){return e(F(t,a))},deleteTask:function(t,a){return e(U(t,a))},logout:function(t){return e(T(t))}}}))((function(e){var t=Object(l.g)();return Object(n.useEffect)((function(){e.loadTasks(null,t)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{authenticated:e.user.authenticated,logout:function(){return e.logout(t)}}),r.a.createElement(d,{addTask:e.addTask}),r.a.createElement(b,{tasks:e.tasks.data,loadTasks:function(a){return e.loadTasks(a,t)},updateTask:function(a){return e.updateTask(a,t)},deleteTask:function(a){return e.deleteTask(a,t)}}))}));function P(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(u.a)(l,2),d=s[0],m=s[1];return r.a.createElement("div",{className:"pa4"},r.a.createElement("div",{className:"cf pa2"},r.a.createElement("div",{className:"fl w-30-ns w-100 pa2 cf"},r.a.createElement("label",{className:"db fr f3",htmlFor:"id"},"ID")),r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("input",{type:"text",className:"w-60",name:"id",value:c,onChange:function(e){o(e.target.value)}}))),r.a.createElement("div",{className:"cf pa2"},r.a.createElement("div",{className:"fl w-30-ns w-100 pa2 cf"},r.a.createElement("label",{className:"db fr f3",htmlFor:"password"},"Password")),r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("input",{type:"password",className:"w-60",name:"password",value:d,onChange:function(e){m(e.target.value)}}))),r.a.createElement("div",{className:"cf pa2 mt4"},r.a.createElement("div",{className:"fl w-30-ns w-100 pa2"},"\xa0"),r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("a",{className:"link w-60 v-mid tc bg-gray white db pa2 f3 mb2",href:"#",onClick:function(){e.login(c,d)}},"Login"),r.a.createElement(i.b,{className:"link w-60 v-mid tc bg-white black ba bw-1 db pa2 f3",to:"/signup"},"Signup"))))}var _=Object(p.b)((function(e){return{}}),(function(e){return{login:function(t,a,n,r){return e(function(e,t,a,n){return function(r,c){return y.a.showLoading(),L.Login(e,t).then((function(t){if(!t.authorized)return y.a.fire({title:"Login failed",text:t.body.error,icon:"error"});y.a.close(),r(j(e)),r(O(!0)),a.replace(n,"/")})).catch((function(e){return y.a.fire({title:"Login failed",text:e,icon:"error"})}))}}(t,a,n,r))}}}))((function(e){var t=Object(l.g)(),a=(Object(l.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,null),r.a.createElement(P,{login:function(n,r){e.login(n,r,t,a)}}))}));function J(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(u.a)(l,2),d=s[0],m=s[1],f=Object(n.useState)(5),b=Object(u.a)(f,2),p=b[0],h=b[1];return r.a.createElement("div",{className:"pa4"},r.a.createElement("div",{className:"cf pa2"},r.a.createElement("div",{className:"fl w-30-ns w-100 pa2 cf"},r.a.createElement("label",{className:"db fr f3",htmlFor:"id"},"ID")),r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("input",{type:"text",className:"w-60",name:"id",value:c,onChange:function(e){o(e.target.value)}}))),r.a.createElement("div",{className:"cf pa2"},r.a.createElement("div",{className:"fl w-30-ns w-100 pa2 cf"},r.a.createElement("label",{className:"db fr f3",htmlFor:"password"},"Password")),r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("input",{type:"password",className:"w-60",name:"password",value:d,onChange:function(e){m(e.target.value)}}))),r.a.createElement("div",{className:"cf pa2"},r.a.createElement("div",{className:"fl w-30-ns w-100 pa2 cf"},r.a.createElement("label",{className:"db fr f3",htmlFor:"id"},"ID")),r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("input",{type:"number",className:"w-60",name:"id",value:p,onChange:function(e){h(e.target.value)}}))),r.a.createElement("div",{className:"cf pa2 mt4"},r.a.createElement("div",{className:"fl w-30-ns w-100 pa2"},"\xa0"),r.a.createElement("div",{className:"fl w-70-ns w-100 pa2"},r.a.createElement("a",{className:"link w-60 v-mid tc bg-gray white db pa2 f3 mb2",href:"#",onClick:function(){e.signup(c,d,+p)}},"Signup"),r.a.createElement(i.b,{className:"link w-60 v-mid tc bg-white black ba bw-1 db pa2 f3",to:"/login"},"Back to Login"))))}var I=Object(p.b)((function(e){return{}}),(function(e){return{signup:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c,o){return y.a.showLoading(),L.Signup(e,t,a).then((function(t){return t.authorized&&t.body.data?(y.a.close(),c(j(e)),c(O(!0)),void n.replace(r,"/")):y.a.fire({title:"Signup failed",text:t.body.error,icon:"error"})})).catch((function(e){return y.a.fire({title:"Signup failed",text:e,icon:"error"})}))}}(t,a,n,r,c))}}}))((function(e){var t=Object(l.g)(),a=(Object(l.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,null),r.a.createElement(J,{signup:function(n,r,c){e.signup(n,r,c,t,a)}}))})),R=a(26);var Y=Object(p.b)((function(e){return{user:e.auth.user}}),(function(e){return{}}))((function(e){var t=e.children,a=Object(R.a)(e,["children"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(a){var n=a.location;return e.user.authenticated?t:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:n}}})}}))}));var K=function(){return r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/signup",component:I}),r.a.createElement(l.b,{path:"/login",component:_}),r.a.createElement(Y,{path:"/tasks",component:z}),r.a.createElement(Y,{path:"/",component:z})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(10),B=a(24),M=a(25),H={tasks:{data:[],error:null}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(m.a)({},e,{tasks:Object(m.a)({},e.tasks,{data:t.data||[],error:t.error})});case g:var a=e.tasks.data||[];return Object(m.a)({},e,{tasks:Object(m.a)({},e.tasks,{data:[].concat(Object(M.a)(a),[t.data]),error:t.error})});case v:var n=e.tasks.data||[];return Object(m.a)({},e,{tasks:Object(m.a)({},e.tasks,{data:n.map((function(e){return e.id===t.data.id?t.data:e})),error:t.error})});case w:var r=e.tasks.data||[];return Object(m.a)({},e,{tasks:Object(m.a)({},e.tasks,{data:r.filter((function(e){return e.id!==t.data})),error:t.error})});default:return e}},q={user:{id:"",authenticated:!0}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(m.a)({},e,{user:Object(m.a)({},e.user,{authenticated:t.authenticated})});case k:return Object(m.a)({},e,{user:Object(m.a)({},e.user,{id:t.id})});default:return e}},Q=Object(W.c)({index:$,auth:G}),V=Object(W.d)(Q,Object(W.a)(B.a));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:V},r.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.ff204eae.chunk.js.map